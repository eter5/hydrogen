"use strict";(self.webpackChunkdocs_v_1=self.webpackChunkdocs_v_1||[]).push([[9376],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),l=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(i.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,h=d["".concat(i,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(h,s(s({ref:t},u),{},{components:n})):r.createElement(h,s({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=m;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[d]="string"==typeof e?e:a,s[1]=p;for(var l=2;l<o;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2312:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>p,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const o={},s="Manage routes",p={unversionedId:"tutorials/routing/manage-routes",id:"tutorials/routing/manage-routes",title:"Manage routes",description:"Hydrogen 2.0 is out now. These archival Hydrogen 1.0 docs are provided only to assist developers during their upgrade process. Please migrate to Hydrogen 2.0 as soon as possible.",source:"@site/docs/tutorials/routing/manage-routes.md",sourceDirName:"tutorials/routing",slug:"/tutorials/routing/manage-routes",permalink:"/hydrogen-v1/tutorials/routing/manage-routes",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"hydrogen",previous:{title:"Routing",permalink:"/hydrogen-v1/tutorials/routing/"},next:{title:"SEO",permalink:"/hydrogen-v1/tutorials/seo/"}},i={},l=[{value:"Retrieve the <code>handle</code> property",id:"retrieve-the-handle-property",level:2},{value:"Provide a custom static implementation",id:"provide-a-custom-static-implementation",level:2},{value:"Prefetch a link source",id:"prefetch-a-link-source",level:3},{value:"Disable prefetching link sources",id:"disable-prefetching-link-sources",level:2},{value:"Catch all routes",id:"catch-all-routes",level:2},{value:"Example",id:"example",level:3},{value:"API routes",id:"api-routes",level:2},{value:"Set a route that returns a JSON response",id:"set-a-route-that-returns-a-json-response",level:3},{value:"Set a URL redirect",id:"set-a-url-redirect",level:3},{value:"Switch the HTTP method",id:"switch-the-http-method",level:3},{value:"Use API routes to read a request body",id:"use-api-routes-to-read-a-request-body",level:3},{value:"Concatenate requests",id:"concatenate-requests",level:3},{value:"Create custom experiences with props",id:"create-custom-experiences-with-props",level:2},{value:"<code>request</code>: <code>HydrogenRequest</code>",id:"request-hydrogenrequest",level:3},{value:"Customize the response returned from the Hydrogen server",id:"customize-the-response-returned-from-the-hydrogen-server",level:3},{value:"Modify full-page cache options",id:"modify-full-page-cache-options",level:3},{value:"Disable streaming for routes",id:"disable-streaming-for-routes",level:3},{value:"Set headers and status codes",id:"set-headers-and-status-codes",level:3},{value:"Redirect to a URL",id:"redirect-to-a-url",level:3},{value:"Server props",id:"server-props",level:3}],u={toc:l},d="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"manage-routes"},"Manage routes"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Hydrogen 2.0 is out now. These archival Hydrogen 1.0 docs are provided only to assist developers during their upgrade process. Please ",(0,a.kt)("a",{parentName:"p",href:"https://shopify.dev/docs/custom-storefronts/hydrogen/migrate-hydrogen-remix"},"migrate to Hydrogen 2.0")," as soon as possible.")),(0,a.kt)("p",null,"The Hydrogen framework uses a ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/routing/"},"file-based routing system"),". This guide explains how to perform some common tasks for managing routes."),(0,a.kt)("h2",{id:"retrieve-the-handle-property"},"Retrieve the ",(0,a.kt)("inlineCode",{parentName:"h2"},"handle")," property"),(0,a.kt)("p",null,"The routes are registered in ",(0,a.kt)("inlineCode",{parentName:"p"},"App.server.jsx")," and Hydrogen converts ",(0,a.kt)("inlineCode",{parentName:"p"},"[handle]")," to ",(0,a.kt)("inlineCode",{parentName:"p"},":handle"),". ",(0,a.kt)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/routing/#example"},"Refer to an example"),"."),(0,a.kt)("p",null,"You can retrieve the ",(0,a.kt)("inlineCode",{parentName:"p"},"handle")," property by using the ",(0,a.kt)("a",{parentName:"p",href:"/hooks/framework/userouteparams/"},(0,a.kt)("inlineCode",{parentName:"a"},"useRouteParams")," hook"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"// [handle].server.jsx\n\nexport default function Product() {\n  const {handle} = useRouteParams();\n  return <div>{handle}</div>;\n}\n")),(0,a.kt)("h2",{id:"provide-a-custom-static-implementation"},"Provide a custom static implementation"),(0,a.kt)("p",null,"You can also provide a custom static implementation of a dynamic page to override the default."),(0,a.kt)("p",null,"In the following example, any requests to ",(0,a.kt)("inlineCode",{parentName:"p"},"/products/hoodie")," are rendered using ",(0,a.kt)("inlineCode",{parentName:"p"},"hoodie.server.jsx")," instead of ",(0,a.kt)("inlineCode",{parentName:"p"},"[handle].server.jsx"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"/routes/products/hoodie.server.jsx\n/routes/products/[handle].server.jsx\n")),(0,a.kt)("h3",{id:"prefetch-a-link-source"},"Prefetch a link source"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"/components/framework/link/"},(0,a.kt)("inlineCode",{parentName:"a"},"Link"))," component includes an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"prefetch")," prop that controls whether to prefetch a link source when a user signals intent. The default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("p",null,"If you want to disable link prefetching, then pass ",(0,a.kt)("inlineCode",{parentName:"p"},"prefetch={false}")," to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Link")," component:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'// Component.client.jsx\n\n<Link prefetch={false} to="/path">Link</Link>\n')),(0,a.kt)("p",null,"By default, when a user hovers or focuses on the link for more than 100ms, a prefetch link tag is rendered for the React Server Components response path. If the user prematurely leaves or blurs the link, then the prefetch link tag isn't added."),(0,a.kt)("h2",{id:"disable-prefetching-link-sources"},"Disable prefetching link sources"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"/components/framework/link/"},(0,a.kt)("inlineCode",{parentName:"a"},"Link"))," component includes an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"prefetch")," prop that controls whether to prefetch a link source when a user signals intent. The default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("p",null,"If you want to disable link prefetching, then pass ",(0,a.kt)("inlineCode",{parentName:"p"},"prefetch={false}")," to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Link")," component:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'// Component.client.jsx\n\n<Link prefetch={false} to="/path">Link</Link>\n')),(0,a.kt)("p",null,"By default, when a user hovers or focuses on the link for more than 100ms, a prefetch link tag is rendered for the React Server Components response path. If the user prematurely leaves or blurs the link, then the prefetch link tag isn't added."),(0,a.kt)("h2",{id:"catch-all-routes"},"Catch all routes"),(0,a.kt)("p",null,"You can extend dynamic routes to catch all paths by adding an ellipsis (...) inside the brackets. For example, ",(0,a.kt)("inlineCode",{parentName:"p"},"/routes/example/[...handle].server.jsx")," will match ",(0,a.kt)("inlineCode",{parentName:"p"},"/example/a")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"/example/a/b"),"."),(0,a.kt)("p",null,"Learn more about ",(0,a.kt)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/routing/#built-in-routes"},"Hydrogen's built-in routes"),"."),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("p",null,"The following example shows how to obtain catch all routes data using ",(0,a.kt)("inlineCode",{parentName:"p"},"location.pathname"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"// [...handle].server.jsx\n\nexport default function({request}) {\n  const { pathname } = new URL(request.url);)\n}\n")),(0,a.kt)("h2",{id:"api-routes"},"API routes"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note:\nIf you want to use a third-party data source to render Hydrogen components, then refer to ",(0,a.kt)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/data-sources/work-with-3p-data-sources#use-hydrogen-components-with-a-third-party-data-source"},"Using Hydrogen components with a third-party data source"),". If you want to fetch data that goes alongside your Shopify product data and shopping experience, then refer to ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/data-sources/work-with-3p-data-sources#fetch-supplementary-data"},"Fetching supplementary data"),".")),(0,a.kt)("p",null,"Any server component within the ",(0,a.kt)("inlineCode",{parentName:"p"},"src/routes")," directory that exports an API function will become an API route."),(0,a.kt)("p",null,"The following examples show some common use cases for implementing API routes:"),(0,a.kt)("h3",{id:"set-a-route-that-returns-a-json-response"},"Set a route that returns a JSON response"),(0,a.kt)("p",null,"The following example shows an API route that returns a JSON response:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport function api(request, {params}) {\n  return new Response(JSON.stringify({data: 1}), {\n    headers: {'Content-Type': 'application/json'},\n  });\n}\n")),(0,a.kt)("h3",{id:"set-a-url-redirect"},"Set a URL redirect"),(0,a.kt)("p",null,"The following example shows how to set up a URL redirect with a status code of ",(0,a.kt)("inlineCode",{parentName:"p"},"301"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport function api(request, {params}) {\n  return new Response(null, {\n    status: 301,\n    headers: {Location: 'https://shopify.dev/custom-storefronts/hydrogen'},\n  });\n}\n")),(0,a.kt)("h3",{id:"switch-the-http-method"},"Switch the HTTP method"),(0,a.kt)("p",null,"The following example shows how to switch the HTTP method for the action performed by an API:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport async function api(request, {params}) {\n  switch (request.method) {\n    case 'GET':\n      return new Response('GET');\n    case 'POST':\n      return new Response('POST');\n  }\n}\n")),(0,a.kt)("h3",{id:"use-api-routes-to-read-a-request-body"},"Use API routes to read a request body"),(0,a.kt)("p",null,"The following example shows how to use API routes to read a request body:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport async function api(request, {params}) {\n  if (request.method === 'PUT') {\n    const json = await request.json();\n    await saveToDatabase(params.handle, json);\n    return new Response('success');\n  }\n\n  return new Response(null, {status: 405, headers: {Allow: 'PUT'}});\n}\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Tip:\nExplore an ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Shopify/hydrogen/blob/main/templates/demo-store/src/routes/api/countries.server.ts"},"example implementation in GitHub")," that lazy loads ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Shopify/hydrogen/blob/main/templates/demo-store/src/components/CountrySelector.client.tsx"},"available countries")," by an API route (",(0,a.kt)("inlineCode",{parentName:"p"},"/api/countries"),").")),(0,a.kt)("h3",{id:"concatenate-requests"},"Concatenate requests"),(0,a.kt)("p",null,"You can concatenate requests in API routes to avoid extra network problems, such as waterfall requests. Concatenating requests is useful for HTML forms, where it's common to refresh the current page after a form is submitted."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\n// src/routes/my-page.server.jsx\n\nexport async function api(request) {\n  if (request.method === 'POST') {\n    // do some work here...\n  }\n\n  return new Request(request.url, {method: 'GET'});\n}\n\nexport default function Page() {\n  return (\n    <form action=\"/my-page\" method=\"POST\">\n      ...\n    </form>\n  );\n}\n")),(0,a.kt)("h2",{id:"create-custom-experiences-with-props"},"Create custom experiences with props"),(0,a.kt)("p",null,"Server components placed in the ",(0,a.kt)("inlineCode",{parentName:"p"},"src/routes")," directory ",(0,a.kt)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/routing/#props-for-creating-custom-experiences"},"receive special props")," that you can use to create custom experiences:"),(0,a.kt)("p",null,"The following are some examples."),(0,a.kt)("h3",{id:"request-hydrogenrequest"},(0,a.kt)("inlineCode",{parentName:"h3"},"request"),": ",(0,a.kt)("inlineCode",{parentName:"h3"},"HydrogenRequest")),(0,a.kt)("p",null,"You might want to inspect incoming requests for cookies, headers or other signals that might require a unique response."),(0,a.kt)("p",null,"All server components receive a ",(0,a.kt)("inlineCode",{parentName:"p"},"request")," prop containing a Hydrogen-specific version of ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Request"},(0,a.kt)("inlineCode",{parentName:"a"},"Request")),"."),(0,a.kt)("p",null,"In addition to the standard methods, ",(0,a.kt)("inlineCode",{parentName:"p"},"HydrogenRequest")," exposes a ",(0,a.kt)("inlineCode",{parentName:"p"},"cookies")," helper, which is a simple ",(0,a.kt)("inlineCode",{parentName:"p"},"Map")," of cookie values:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nfunction MyPage({request}) {\n  if (request.headers.get('my-custom-header') === SOME_VALUE) {\n    // Do something based on a header\n  }\n\n  if (request.cookies.get('my-cookie') === OTHER_VALUE) {\n    // Do something based on a cookie\n  }\n}\n")),(0,a.kt)("p",null,"In some cases, you might want to use ",(0,a.kt)("inlineCode",{parentName:"p"},"HydrogenRequest.normalizedUrl")," to access the intended URL rather than the pathname encoded for a ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/react-server-components/"},"React Server Components request"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nfunction MyPage({request}) {\n  // \ud83d\udd34 You probably don't want to read `url`:\n  console.log(request.url);\n  // https://example.com/__rsc?state=%7B%22pathname%22%3A%22%2Fproducts%22%2C%22search%22%3A%22%22%7D\n\n  // \u2705 You probably want the `normalizedUrl`:\n  console.log(request.normalizedUrl);\n  // https://example.com/products\n}\n")),(0,a.kt)("h3",{id:"customize-the-response-returned-from-the-hydrogen-server"},"Customize the response returned from the Hydrogen server"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Prop"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"response"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"HydrogenResponse"),"."),(0,a.kt)("p",null,"You can customize the response returned from the Hydrogen server, such as setting a different status code or defining a custom headers."),(0,a.kt)("p",null,"All server components receive a ",(0,a.kt)("inlineCode",{parentName:"p"},"response")," prop containing a Hydrogen-specific version of ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Response"},(0,a.kt)("inlineCode",{parentName:"a"},"Response")),"."),(0,a.kt)("h3",{id:"modify-full-page-cache-options"},"Modify full-page cache options"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Prop"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"response.cache()")),(0,a.kt)("p",null,"If you want to modify the ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/querying/cache/"},"full-page cache options"),", then you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"cache()")," on the response object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport default function MyProducts({response}) {\n  response.cache({\n    // Cache the page for one hour.\n    maxAge: 60 * 60,\n    // Serve the stale page for up to 23 hours while getting a fresh response in the background.\n    staleWhileRevalidate: 23 * 60 * 60,\n  });\n}\n")),(0,a.kt)("h3",{id:"disable-streaming-for-routes"},"Disable streaming for routes"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Caution:\nThere are ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/best-practices/performance/"},"performance benefits")," to streaming. You shouldn't completely disable streaming for all of your storefront's routes.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Prop"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"response.doNotStream()")),(0,a.kt)("p",null,"By default, Hydrogen ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/streaming-ssr/"},"streams SSR responses"),". However, you can also disable streaming for each route and return a fully buffered response. This is helpful in scenarios like ",(0,a.kt)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/seo/manage-seo#check-for-custom-robots"},"handling custom SEO bots"),"."),(0,a.kt)("p",null,"To disable streaming, call ",(0,a.kt)("inlineCode",{parentName:"p"},"response.doNotStream()"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\n\nexport default function CustomPage({response}) {\n  response.doNotStream();\n\n  // ...\n}\n")),(0,a.kt)("h3",{id:"set-headers-and-status-codes"},"Set headers and status codes"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Prop"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"response")),(0,a.kt)("p",null,"You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"response")," to set headers or status codes using the ",(0,a.kt)("inlineCode",{parentName:"p"},"Response")," API:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport default function CustomPage({response}) {\n  response.doNotStream();\n\n  response.headers.set('custom-header', 'value');\n  response.status = 201;\n\n  // ...\n}\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Caution:\nYou must call ",(0,a.kt)("inlineCode",{parentName:"p"},"response.doNotStream()")," before any calls to ",(0,a.kt)("inlineCode",{parentName:"p"},"fetchSync"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useQuery")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"useShopQuery")," to prevent streaming while the Suspense data is resolved.")),(0,a.kt)("h3",{id:"redirect-to-a-url"},"Redirect to a URL"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Prop"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"response.redirect()")),(0,a.kt)("p",null,"If you want to return users to a different URL, then use ",(0,a.kt)("inlineCode",{parentName:"p"},"response.redirect()")," in your server components."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport default function PageThatShouldRedirect({response}) {\n  return response.redirect('/new-page');\n}\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect")," function accepts a ",(0,a.kt)("inlineCode",{parentName:"p"},"location")," URL and an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"statusCode"),", which defaults to ",(0,a.kt)("inlineCode",{parentName:"p"},"307"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\n// This redirect function only supports initial server-rendered page responses. It doesn't yet support client-navigated responses.\nreturn response.redirect('https://yoursite.com/new-page', 301);\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Caution:\nYou must call ",(0,a.kt)("inlineCode",{parentName:"p"},"return response.redirect()")," before any calls to ",(0,a.kt)("inlineCode",{parentName:"p"},"fetchSync"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useQuery")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"useShopQuery")," to prevent streaming while the Suspense data is resolved, or use ",(0,a.kt)("inlineCode",{parentName:"p"},"response.doNotStream()")," to prevent streaming altogether on the response. The value must also be returned.")),(0,a.kt)("h3",{id:"server-props"},"Server props"),(0,a.kt)("p",null,"In addition to ",(0,a.kt)("inlineCode",{parentName:"p"},"request")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"response")," props, any props you manage with ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/server-props/"},(0,a.kt)("inlineCode",{parentName:"a"},"setServerProps"))," are passed to each of your server components as props:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"\n\nexport default function MyPage({custom, props, here}) {\n  // Use custom server props\n}\n")))}c.isMDXComponent=!0}}]);